<div class="container" style="max-width:720px;margin:1rem auto;padding:1rem;">
  <h1>Weather + AI Travel</h1>

  <form (ngSubmit)="onSearch()" style="display:flex;gap:.5rem;">
    <input [(ngModel)]="city" name="city" placeholder="City..." required />
    <button type="submit" [disabled]="state === 'loading'">Search</button>
  </form>

  <!-- Map stays mounted so Leaflet can initialize -->
  <div style="position:relative;margin-top:1rem;">
    <div id="map" style="height:300px;border:1px solid #ddd;border-radius:8px;"></div>

    <!-- simple loading overlay on the map area -->
    <div *ngIf="state === 'loading'"
         style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
                background:rgba(255,255,255,.7);backdrop-filter:blur(2px);font-weight:500;">
      Loading…
    </div>
  </div>

  <!-- Weather + tips appear only on success -->
  <section *ngIf="weather && state === 'success'" style="margin-top:1rem;">
    <h2>{{ city }} – {{ weather.temp }}°C, {{ weather.summary }}</h2>

    <h3 style="margin-top:1rem;">AI Ideas</h3>
    <ul>
      <li *ngFor="let tip of tips">{{ tip }}</li>
    </ul>
  </section>

  <!-- Friendly error message -->
  <p *ngIf="state === 'error' && errorMsg" style="color:#c00;margin-top:.5rem;">
    {{ errorMsg }}
  </p>
</div>
